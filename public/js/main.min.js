!function(t){t.module("app",["firebase","ui.router","ngAnimate","toastr","luegg.directives","angularTrix","ngSanitize","twitchy"]).config(["toastrConfig",function(e){t.extend(e,{autoDismiss:!1,containerId:"toast-container",maxOpened:0,newestOnTop:!0,positionClass:"toast-bottom-left",preventDuplicates:!1,preventOpenDuplicates:!1,target:"body"})}]),t.module("app").run(["$rootScope","$timeout",function(t,e){t.$on("$viewContentLoaded",function(){e(function(){componentHandler.upgradeAllRegistered()},10)})}]);var e={apiKey:"AIzaSyDfuicTxzKZS46anMXs5ypa1nOGN4OgyRo",authDomain:"stream-d6274.firebaseapp.com",databaseURL:"https://stream-d6274.firebaseio.com",storageBucket:"stream-d6274.appspot.com",messagingSenderId:"443244086555"};firebase.initializeApp(e)}(angular),function(){function t(t,e){t.onStart({to:"main.createpost"},function(t){var l=t.router.stateService;if(void 0==e.userData)return l.target("main.blog")})}function e(t,e,s){t.state("main",{abstract:!0,component:"mainComp"}).state("main.welcome",{component:"welcome",url:"/welcome"}).state("main.blog",{component:"blogComp",url:"/blog"}).state("main.postdetails",{component:"postdetails",url:"/post/{postId}",resolve:{data:a,comments:l}}).state("main.playlist",{component:"playlist",url:"/playlist"}).state("main.createpost",{component:"createPost",url:"/create"}),e.otherwise("/welcome")}function l(t,e){return t.getComments(e.params().postId)}function a(t,e){return t.getPostDetails(e.params().postId)}angular.module("app").config(e),angular.module("app").run(t),t.$inject=["$transitions","dataservice"],e.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],l.$inject=["dataservice","$transition$"],a.$inject=["dataservice","$transition$"]}(),function(){function t(t,e){function l(t){return e(g.child(t).child("comments"))}function a(t,l){return e(g.child(t).child("comments")).$add(l)}function s(e){return t(g.child(e)).$remove()}function i(t){return e(g).$add(t)}function d(t){return e(f).$add(t)}function o(t){return e(t?f:f.limitToLast(15))}function n(e,l){return t(p.child(e).child(l)).$remove()}function r(t,l){return e(p.child(t)).$add(l)}function c(t){return e(p.child(t))}function m(e){return t(g.child(e))}function u(t){return e(g.limitToLast(t))}var p=firebase.database().ref().child("profiles"),g=firebase.database().ref().child("posts"),f=firebase.database().ref().child("messages"),v=this;v.getPosts=u,v.getPostDetails=m,v.addToPlaylist=r,v.getPlaylist=c,v.deleteFromPlaylist=n,v.getMessages=o,v.sendMessage=d,v.addPost=i,v.removePost=s,v.addComment=a,v.getComments=l}angular.module("app").service("dataservice",t),t.$inject=["$firebaseObject","$firebaseArray"]}(),function(){function t(t){return function(e){return t.trustAsResourceUrl(e)}}angular.module("app").filter("trusted",t),t.$inject=["$sce"]}(),function(){angular.module("app").component("welcome",{template:'<div class="welcome"><img class="welcome__img" src="../images/logo.png"><p class="welcome__content">Watch. Communicate. Share.</p><div class="welcome__actions"><a ui-sref="main.blog"><i class="material-icons" id="blog">view_module</i></a><div class="mdl-tooltip mdl-tooltip--large" data-mdl-for="blog">Blog</div><a ui-sref="main.playlist"><i class="material-icons" id="playlist">video_label</i></a><div class="mdl-tooltip mdl-tooltip--large" data-mdl-for="playlist">Playlist</div></div></div>'})}(),function(){function t(){return function(t){return t.slice().reverse()}}angular.module("app").filter("reverse",t)}(),function(){function t(){return function(t){return t.slice(0,4)}}angular.module("app").filter("topblog",t)}(),function(){function t(){return function(t){return t.slice(4)}}angular.module("app").filter("bottomblog",t)}(),function(){function t(){return function(t){return t.split("@")[0]}}angular.module("app").filter("names",t)}(),function(){function t(){return{restrict:"A",link:function(t,e,l){e.bind("keydown keypress",function(e){13!=e.which||e.shiftKey||13==e.which&&(t.$apply(function(){t.$eval(l.enterDir)}),e.preventDefault())})}}}angular.module("app").directive("enterDir",t)}(),function(){function t(t,e,l,a,s){function i(){dialog.showModal()}function d(){if(document.querySelector("main.mdl-layout__content").style.overflowY="",dialog.close(),g.data)for(key in g.data)g.data[key]="";document.querySelector("main.mdl-layout__content").style.overflowY="auto"}function o(t,e,l){t&&e&&void 0!=l?e===l?p.$createUserWithEmailAndPassword(t,e).then(m,u):alert("Wrong Password"):alert("Fill the fields")}function n(t,e){t&&void 0!=e?p.$signInWithEmailAndPassword(t,e).then(m,u):alert("Fill the fields")}function r(){a.current.name;p.$signInWithPopup("google").then(m,u)}function c(){p.$signOut(),l.userData={}}function m(t){d(),e.success("Authorization Complete","Success")}function u(t){e.error(t.message,"Error")}var p=t(),g=this;g.user=!1,g.data={},g.showdialog=i,g.closedialog=d,g.login=n,g.loginGoogle=r,g.register=o,g.logout=c,p.$onAuthStateChanged(function(t){g.user=t,l.userData=t})}angular.module("app").controller("mainCtrl",t),t.$inject=["$firebaseAuth","toastr","dataservice","$state","$scope"]}(),function(){function t(t,e,l){function a(t){0==n.chatState&&"child_removed"===t.event&&++n.unread}function s(){n.messagesView=!n.messagesView,n.messages=t.getMessages(n.messagesView)}function i(){n.unread>0&&(n.unread=0),n.chatState=n.chatState===!1}function d(){if(null!=t.userData){var e={author:t.userData.email,authorUid:t.userData.uid,text:n.mess.text};""!=n.mess.text?(t.sendMessage(e),n.mess.text=""):l.warning("Write Some Message","Warning")}else l.warning("Authorize Please","Warning")}var o=e(),n=this;n.messagesView=!1,n.chatState=!1,n.unread=0,n.messages=t.getMessages(n.messagesView),n.sendMessage=d,n.limitMessages=s,n.toggleChat=i,n.messages.$watch(a),o.$onAuthStateChanged(function(t){n.user=t})}angular.module("app").controller("chatCtrl",t),t.$inject=["dataservice","$firebaseAuth","toastr"]}(),function(){angular.module("app").component("chat",{template:'<div class="chat" ng-if="$ctrl.chatState"><div class="chat__header"><label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="checkbox2"><input type="checkbox" id="checkbox2" class="mdl-checkbox__input" ng-click="$ctrl.limitMessages()"> <span class="mdl-checkbox__label">View All Messages</span></label> <i class="chat__header__hide material-icons" ng-click="$ctrl.toggleChat()">keyboard_arrow_down</i></div><div class="chat__body" scroll-glue><div class="chat__message" ng-repeat="message in $ctrl.messages"><span class="chat__message_all" ng-class=\'{ "chat__message_mine" : message.authorUid == $ctrl.user.uid }\'>{{message.author | names}}</span><p class="mdl-typography--text-left" ng-bind-html="message.text | twitchy">{{message.text}}</p></div></div><div class="chat__input"><textarea rows="4" enter-dir="$ctrl.sendMessage()" ng-model="$ctrl.mess.text"></textarea> <button class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored chat__send" ng-click="$ctrl.sendMessage()">Send</button></div></div><button ng-click="$ctrl.toggleChat()" class="mdl-button mdl-js-button mdl-button--raised mdl-button--accent chat__button">chat <span ng-if="$ctrl.unread" class="mdl-badge chat__badge" data-badge="{{$ctrl.unread}}"></span></button>',controller:"chatCtrl"})}(),function(){function t(t,e,l){var a=document.querySelector("#dialog");a.showModal||dialogPolyfill.registerDialog(a),angular.element(window).bind("click",function(e){if(e.target==a){for(key in t.$ctrl.data)t.$ctrl.data[key]=void 0;a.close()}})}angular.module("app").directive("authDialog",function(){return{restrict:"E",template:'<dialog id="dialog" class="mdl-dialog"><h4 class="mdl-dialog__title">Hello Guest</h4><div class="mdl-dialog__content"><div class="mdl-tabs mdl-js-tabs mdl-js-ripple-effect"><div class="mdl-tabs__tab-bar"><a href="#login-panel" class="mdl-tabs__tab">Login</a> <a href="#registration-panel" class="mdl-tabs__tab">Register</a></div><div class="mdl-tabs__panel is-active" id="login-panel"><form class="mdl-grid" ng-submit="$ctrl.login($ctrl.data.logmail, $ctrl.data.logpass)"><div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-cell--12-col"><input class="mdl-textfield__input" type="email" id="logmail" ng-model="$ctrl.data.logmail"> <label class="mdl-textfield__label" for="logmail">Email</label></div><div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-cell--12-col"><input class="mdl-textfield__input" type="password" id="logpass" ng-model="$ctrl.data.logpass"> <label class="mdl-textfield__label" for="logpass">Password</label></div><div class="dialog-buttongroup"><button type="submit" class="mdl-button submit">Login</button> <button type="button" class="mdl-button close" ng-click="$ctrl.closedialog()">Cancel</button></div><div class="social_desk">Or Auth via other provider</div><div class="mdl-dialog__actions"><a href="#" class="social_logo social_logo_google" ng-click="$ctrl.loginGoogle()"></a></div></form></div><div class="mdl-tabs__panel" id="registration-panel"><form ng-submit="$ctrl.register($ctrl.data.regmail, $ctrl.data.regpass ,$ctrl.data.confpass)" class="mdl-grid"><div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-cell--12-col"><input class="mdl-textfield__input" type="email" id="regmail" ng-model="$ctrl.data.regmail"> <label class="mdl-textfield__label" for="regmail">Email</label></div><div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-cell--12-col"><input class="mdl-textfield__input" type="password" id="regpass" ng-model="$ctrl.data.regpass"> <label class="mdl-textfield__label" for="regpass">Password</label></div><div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-cell--12-col"><input class="mdl-textfield__input" type="password" id="regconfpass" ng-model="$ctrl.data.confpass"> <label class="mdl-textfield__label" for="regconfpass">Confirm Password</label></div><div class="dialog-buttongroup"><button type="submit" class="mdl-button submit mdl-cell--4">Register</button> <button type="button" class="mdl-button close mdl-cell--4" ng-click="$ctrl.closedialog()">Cancel</button></div></form></div></div></div></dialog>',link:t}})}(),function(){angular.module("app").component("mainComp",{template:'<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header"><header class="mdl-layout__header is-casting-shadow"><div class="mdl-layout__header-row headerwrap"><span class="mdl-layout-title"><img class="logo" src="../images/G2.png"> <span class="logo-text">.geekWatch</span></span><div class="mdl-layout-spacer"></div><h6 class="header-right">{{$ctrl.user.email}}</h6><button class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored header-right" ng-cloak ng-if="!$ctrl.user" ng-click="$ctrl.showdialog()">Sign In</button> <button class="mdl-button mdl-js-button mdl-button--raised mdl-button--accent header-right" ng-cloak ng-if="$ctrl.user" ng-click="$ctrl.logout()">Sign Out</button></div></header><div class="mdl-layout__drawer"><span class="mdl-layout-title">.geekWatch</span><nav class="mdl-navigation"><a class="mdl-navigation__link" ui-sref-active="mdl-navigation__link--current" ui-sref="main.welcome">Welcome</a> <a class="mdl-navigation__link" ui-sref-active="mdl-navigation__link--current" ui-sref="main.blog">Blog</a> <a class="mdl-navigation__link" ui-sref-active="mdl-navigation__link--current" ui-sref="main.playlist">Playlist</a></nav></div><main class="mdl-layout__content"><div class="page-content"><ui-view></ui-view></div></main></div><auth-dialog></auth-dialog><chat></chat>',controller:"mainCtrl"})}(),function(){function t(t,e){function l(){i+=4;var t=e.getPosts(i);t.$loaded(function(){s.posts=t}),window.scrollTo(0,document.body.scrollHeight)}function a(t){var l=confirm("Are You Shure?");l&&e.removePost(t)}var s=this,i=12,d=t();s.devider=!1,s.user=!1,s.posts=e.getPosts(i),s.deletePost=a,s.viewMorePosts=l,d.$onAuthStateChanged(function(t){s.user=t}),s.posts.$loaded(function(){s.devider=!0})}angular.module("app").controller("blogCtrl",t),t.$inject=["$firebaseAuth","dataservice"]}(),function(){angular.module("app").component("blogComp",{template:'<div class="addfield" ng-if="$ctrl.user && $ctrl.devider"><a ui-sref="main.createpost">Create New Post</a></div><div id="p2" class="mdl-progress mdl-js-progress mdl-progress__indeterminate preloader" ng-if="!$ctrl.devider"><p class="proloader__message">Loading...</p></div><div class="mdl-grid cardswrap"><div class="mdl-cell mdl-cell--3-col mdl-cell--4-col-tablet mdl-cell--4-col-phone cardblock" ng-show="$ctrl.devider" ng-repeat="post in $ctrl.posts | reverse | topblog"><div class="demo-card-wide mdl-card mdl-shadow--2dp cardblock__item"><div class="mdl-card__title cardtitle" ng-style="{\'background-image\':\'url({{post.image}})\'}"><h2 class="mdl-card__title-text">{{post.title}}</h2></div><div class="mdl-card__supporting-text cardblock__prevtext">{{post.prevtext}}</div><div class="mdl-card__actions mdl-card--border cardblock__actions"><i class="material-icons cardblock__actions__delete" ng-if="post.authorUid == $ctrl.user.uid" ng-click="$ctrl.deletePost(post.$id)">delete_forever</i> <a ui-sref="main.postdetails({postId : post.$id })" class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect cardblock__actions__elem">View Details</a></div></div></div></div><div class="mdl-grid mdl-cell--12-col devider" ng-if="$ctrl.devider"></div><div class="mdl-grid cardswrap" scroll-glue><div class="mdl-cell mdl-cell--3-col mdl-cell--4-col-tablet mdl-cell--4-col-phone cardblock" ng-repeat="post in $ctrl.posts | reverse | bottomblog"><div class="demo-card-wide mdl-card mdl-shadow--2dp cardblock__item"><div class="mdl-card__title cardtitle" ng-style="{\'background-image\':\'url({{post.image}})\'}"><h2 class="mdl-card__title-text">{{post.title}}</h2></div><div class="mdl-card__supporting-text">{{post.prevtext}}</div><div class="mdl-card__actions mdl-card--border cardblock__actions"><i class="material-icons cardblock__actions__delete" ng-if="post.authorUid == $ctrl.user.uid" ng-click="$ctrl.deletePost(post)">delete_forever</i> <a ui-sref="main.postdetails({postId : post.$id })" class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect cardblock__actions__elem">View Details</a></div></div></div></div><div class="more"><button ng-if="$ctrl.devider" ng-click="$ctrl.viewMorePosts()" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored more__button">View More Posts</button></div>',controller:"blogCtrl"})}(),function(){function t(t,e,l,a){function s(){""==!o.data.content?(o.data.author=t.userData.email,o.data.authorUid=t.userData.uid,t.addPost(o.data).then(function(t){e.success("Post with name "+o.data.title+" successfully added","success"),l.go("main.blog")})):e.warning("Fill the content field","Warning")}function i(){l.go("main.blog")}var d=a(),o=this;o.addPost=s,o.goBack=i,d.$onAuthStateChanged(function(e){t.userData=e,null==t.userData&&l.go("main.blog")})}angular.module("app").controller("createCtrl",t),t.$inject=["dataservice","toastr","$state","$firebaseAuth"]}(),function(){angular.module("app").component("createPost",{template:'<div class="mdl-grid"><form name="postform" ng-submit="$ctrl.addPost()" class="mdl-shadow--4dp createpost"><div class="mdl-textfield mdl-js-textfield createpost__input"><input class="mdl-textfield__input" ng-model="$ctrl.data.title" type="text" id="title" required placeholder="Title"></div><div class="mdl-textfield mdl-js-textfield createpost__input"><input class="mdl-textfield__input" ng-model="$ctrl.data.image" type="url" id="image" required placeholder="Image URL"></div><div class="createpost__contentinput"><div class="trix-editorwrap"><trix-editor class="trix-content" ng-model="$ctrl.data.content" ng-model-options="{ updateOn: \'default\'}" spellcheck="false" angular-trix></trix-editor></div><div class="mdl-textfield mdl-js-textfield createpost__prevtext-wrap"><textarea class="createpost__prevtext" ng-model="$ctrl.data.prevtext" type="text" placeholder="Enter Preview Info (150 letters max)" required maxlength="150"></textarea></div></div><div class="createpost__buttongrp"><button type="submit" class="createpost__button mdl-button mdl-js-button mdl-button--raised mdl-button--colored">Add Record</button> <button type="button" class="createpost__button mdl-button mdl-js-button mdl-button--raised mdl-button--accent" ng-click="$ctrl.goBack()">Cancel</button></div></form></div>',controller:"createCtrl"})}(),function(){function t(t,e){return{restrict:"A",link:function(t,e,l){console.log(angular.element(e));var a=angular.element(e);a.bind("keydown keypress",function(){a.css("height",""),a.css("height",Math.min(e[0].scrollHeight)+"px")})}}}angular.module("app").directive("extextarea",t),t.$inject=["$window","$document"]}(),function(){function t(t,e,l){function a(){return n.user?"You Can Leave Your Message Here":"To Leave Comment Authorize Please"}function s(){n.data.$loaded(function(){n.loader=!1})}function i(){var t={author:n.user.email,authorUid:n.user.uid,text:n.message};e.addComment(n.data.$id,t).then(d,o)}function d(t){n.message="",l.success("Your Message Was Added","Success")}function o(t){n.message="",l.error(t.message,"Error")}var n=this,r=t();n.loader=!0,n.$onInit=s,n.addComment=i,n.placeholder=a,r.$onAuthStateChanged(function(t){n.user=t,n.message=""})}angular.module("app").controller("postDetailsCtrl",t),t.$inject=["$firebaseAuth","dataservice","toastr"]}(),function(){angular.module("app").component("postdetails",{bindings:{data:"<",comments:"<"},template:'<div id="p2" class="mdl-progress mdl-js-progress mdl-progress__indeterminate preloader" ng-if="$ctrl.loader"><p class="proloader__message">Loading...</p></div><div class="mdl-grid details-wrap" ng-cloak ng-if="!$ctrl.loader"><div class="mdl-cell mdl-cell--8-col mdl-card mdl-shadow--4dp details"><div class="mdl-card__title"><h1 class="mdl-card__title-text mdl-typography--text-center">{{$ctrl.data.title}}</h1></div><img class="details__image" ng-src="{{$ctrl.data.image}}"><div class="details__content" ng-bind-html="$ctrl.data.content"></div><small class="details__author">{{$ctrl.data.author}}</small><div id="details__line"></div><div class="details__comment-wrap" ng-repeat="comment in $ctrl.comments"><div class="comment"><p class="comment__author">{{comment.author}}</p><p class="comment__content">{{comment.text}}</p></div></div><div class="details__comment-wrap"><textarea extextarea enter-dir="$ctrl.addComment()" id="comment-input" class="details__comment-input" ng-model="$ctrl.message" ng-disabled="!$ctrl.user" placeholder="{{$ctrl.placeholder()}}"></textarea></div><button class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored details__send" ng-disabled="!$ctrl.user" ng-click="$ctrl.addComment()">Send</button><div class="mdl-card__menu"><a ui-sref="main.blog"><i class="material-icons">navigate_before</i></a></div></div></div>',controller:"postDetailsCtrl"})}(),function(){function t(t,e,l,a){function s(){var l=o.addplayer.site;switch(o.addplayer.service){case"twitch":var a="https://player.twitch.tv/?autoplay=false&channel=",s={};s.path=a+l,s.service=o.addplayer.service,t.addToPlaylist(t.userData.uid.toString(),s),o.addplayer.site="",e.success(l+" added to playlist","Success");break;case"cybergame":var i="https://api.cybergame.tv/p/embed.php?c=",d="&w=600&h=360&type=embed",n={};n.path=i+l+d,n.service=o.addplayer.service,t.addToPlaylist(t.userData.uid.toString(),n),o.addplayer.site="",e.success(l+" added to playlist","Success")}}function i(e){t.deleteFromPlaylist(t.userData.uid,e)}var d=l(),o=this;o.addPlayerHandler=s,o.deletePlayerHandler=i,d.$onAuthStateChanged(function(l){o.disabled=!1,o.playlist=[],l?(o.loader=!1,o.user=l,o.playlist=t.getPlaylist(o.user.uid),o.playlist.$loaded(function(t){o.loader=!0})):(o.disabled=!0,o.loader=!0,"main.playlist"===a.current.name&&e.info("You Are Not Authorized, to enable playlist please login","Info"))})}angular.module("app").controller("playlistCtrl",t),t.$inject=["dataservice","toastr","$firebaseAuth","$state"]}(),function(){angular.module("app").component("playlist",{template:'<div class="mdl-grid"><div class="mdl-grid mdl-cell mdl-cell--12-col addplayer" ng-if="$ctrl.loader"><form class="mdl-cell mdl-cell--8-col mdl-cell--8-col-tablet" ng-submit="$ctrl.addPlayerHandler()"><div class="mdl-textfield mdl-js-textfield addchanel"><input class="mdl-textfield__input" ng-disabled="$ctrl.disabled" ng-model="$ctrl.addplayer.site" type="text" required placeholder="Enter Channels Name"></div><div class="addchanel__controls"><label class="mdl-radio mdl-js-radio" for="option1"><input type="radio" ng-disabled="$ctrl.disabled" ng-model="$ctrl.addplayer.service" id="option1" value="twitch" name="player" class="mdl-radio__button" checked required> <span class="mdl-radio__label">Twitch</span></label> <label class="mdl-radio mdl-js-radio mdl-js-ripple-effect" for="option2"><input type="radio" ng-disabled="$ctrl.disabled" ng-model="$ctrl.addplayer.service" id="option2" value="cybergame" name="player" class="mdl-radio__button" required> <span class="mdl-radio__label">CyberGame</span></label> <button type="submit" ng-disabled="$ctrl.disabled" class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--primary"><i class="material-icons">add</i></button></div></form></div><div id="p2" ng-if="!$ctrl.loader" class="mdl-progress mdl-js-progress mdl-progress__indeterminate preloader"><p class="proloader__message">Loading...</p></div><div ng-if="$ctrl.loader" class="stream mdl-cell mdl-cell--6-col mdl-cell--8-col-tablet" ng-repeat="stream in $ctrl.playlist"><div class="stream__controll"><i class="stream__delete material-icons" ng-click="$ctrl.deletePlayerHandler(stream.$id)">clear</i></div><iframe class="stream__frame" ng-src="{{stream.path | trusted}}" frameborder="0" autoplay="false" allowfullscreen="true" scrolling="no"></iframe></div></div>',controller:"playlistCtrl"})}();